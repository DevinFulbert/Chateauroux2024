{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"1/ Ch\u00e2teauroux IP / VLAN","text":""},{"location":"#tableau-du-reseau-de-chateauroux","title":"Tableau du r\u00e9seau de Ch\u00e2teauroux","text":"@ R\u00e9seau CIDR Broadcast 172.28.0.0 /19 172.28.31.255"},{"location":"#tableaux-dadressage-vlan-utilisables","title":"Tableaux d'adressage VLAN utilisables","text":"N\u00b0 de VLAN de service Service Plages VLAN 210 Management 172.28.0.1 /24 - 172.28.0.254 211 Serveurs 172.28.1.1 /24 - 172.28.1.254 215 Users 172.28.5.1 /24 - 172.28.5.254 216 LAN 172.28.2.1 /24 - 172.28.2.254 217 WAN 172.28.3.1 /24 - 172.28.3.254"},{"location":"#ports-associes-aux-vlans","title":"Ports associ\u00e9s aux VLANS","text":"Ports VLANS Fa1/0/1 - 4 211 Fa1/0/5 - 8 216 Fa1/0/9 - 12 217 Fa1/0/13 - 16 215 Fa1/0/1 \u00e0 Fa1/0/4 211 Fa1/0/13 172.28.1.2"},{"location":"NAT/","title":"8/ NAT","text":""},{"location":"NAT/#configuration-du-nat","title":"Configuration du NAT","text":""},{"location":"NAT/#quest-ce-que-le-nat","title":"Qu'est ce que le NAT ? <p>NAT (Network Address Translation) est un processus de modification des adresses IP et des ports source et de destination. La traduction d'adresses r\u00e9duit le besoin d'adresses publiques IPv4 et masque les plages d'adresses r\u00e9seau priv\u00e9es. Le processus est g\u00e9n\u00e9ralement effectu\u00e9 par des routeurs ou des pare-feu.</p>","text":""},{"location":"NAT/#schema-du-routeur","title":"Sch\u00e9ma du routeur","text":""},{"location":"NAT/#configuration-des-routeurs","title":"Configuration des Routeurs <p>Pour la configuration des routeurs on a commenc\u00e9 \u00e0 faire la configuration sur le LAN \u00e0 l'aide d'un routeur de notre r\u00e9seau (172.28.0.0/19) qui sera par la suite connect\u00e9 au routeur : Chateauroux 1 qui a pour adresse 221.87.136.2/30.</p> <p>Nous avons commenc\u00e9 par activer le IP routing sur le routeur \u00e0 l'aide de cette commande :</p> <p><code>conf t</code></p> <p><code>ip routing</code></p>","text":""},{"location":"NAT/#configuration-des-interfaces","title":"Configuration des interfaces <p>Par la suite on a configurer les interfaces suivantes :</p> <p>GigabitEthernet 0/0 et GigabitEthernet 0/1</p> <p>Selon le brassage physique que vous faites vous auriez a d\u00e9finir si le port 0/0 et le port outside ou inside et de m\u00eame pour le port 0/1.</p> <p>Dans notre cas nous avons choisis que le port 0/0 aller \u00eatre le port outside donc connecter avec l'ext\u00e9rieur (internet), et donc le port 0/1 est donc le port inside donc connecter \u00e0 notre r\u00e9seau.</p>","text":""},{"location":"NAT/#configuration-adsl","title":"Configuration ADSL <p>Port GigabitEthernet 0/0 :</p> <p><code>conf t</code></p> <p><code>int GigabitEthernet 0/0</code></p> <p><code>ip address 221.87.136.2 255.255.255.252</code> &lt;-- Correspond \u00e0 l'IP du routeur ADSL</p> <p><code>ip nat outside</code> &lt;-- R\u00e9seau Externe</p> <p>Port GigabitEthernet 0/1 :</p> <p><code>conf t</code></p> <p><code>int GigabitEthernet 0/1</code></p> <p><code>ip address 172.28.3.253 255.255.255.0</code> &lt;-- Correspond \u00e0 la passerelle pour entrer dans notre r\u00e9seau LAN</p> <p><code>ip nat inside</code> &lt;-- R\u00e9seau Interne</p> <p>Pour la traduction d'adresse :</p> <p><code>ip nat inside source list 1 interface gigabitEthernet 0/0 overload</code></p> <p>Puis on a configurer l'IP route par d\u00e9faut :</p> <p><code>ip route 0.0.0.0 0.0.0.0 221.87.136.1</code></p> <p><code>access-list 1 permit 172.28.0.0 0.0.31.255</code></p>","text":""},{"location":"NAT/#configuration-fibre","title":"Configuration Fibre <p>Port GigabitEthernet 0/0 :</p> <p><code>conf t</code></p> <p><code>int GigabitEthernet 0/0</code></p> <p><code>ip address 183.44.36.1 255.255.255.252</code> &lt;-- Correspond \u00e0 l'IP du routeur ADSL</p> <p><code>ip nat outside</code> &lt;-- R\u00e9seau Externe</p> <p>Port GigabitEthernet 0/1 :</p> <p><code>conf t</code></p> <p><code>int GigabitEthernet 0/1</code></p> <p><code>ip address 172.28.3.253 255.255.255.0</code> &lt;-- Correspond \u00e0 la passerelle pour entrer dans notre r\u00e9seau LAN</p> <p><code>ip nat inside</code> &lt;-- R\u00e9seau Interne</p> <p>Pour la traduction d'adresse :</p> <p><code>ip nat inside source list 1 interface gigabitEthernet 0/0 overload</code></p> <p>Puis on a configurer l'IP route par d\u00e9faut :</p> <p><code>ip route 0.0.0.0 0.0.0.0 183.44.36.2</code></p> <p><code>access-list 1 permit 172.28.0.0 0.0.31.255</code></p>","text":""},{"location":"NAT/#capture-de-trafic-reseau-a-dun-port-mirroring","title":"Capture de trafic r\u00e9seau \u00e0 d'un port mirroring <p>Le port mirroring est une fonctionnalit\u00e9 de gestion de r\u00e9seau qui permet de copier le trafic r\u00e9seau provenant d'un ou plusieurs ports d'un commutateur r\u00e9seau (ou switch) vers un autre port sp\u00e9cialement configur\u00e9 \u00e0 cet effet, appel\u00e9 \"port miroir\" ou \"port de surveillance.\" Cette fonctionnalit\u00e9 est couramment utilis\u00e9e \u00e0 des fins de d\u00e9pannage, de surveillance r\u00e9seau et d'analyse du trafic. </p> <p>\u00b0 Pour appliquer le port mirroring sur le port source :</p> <p><code>conf t</code></p> <p><code>monitor session 1 source interface [nom et num\u00e9ro de port] both</code></p> <p>\u00b0 Pour appliquer le port mirroring sur le port destination :</p> <p><code>conf t</code></p> <p><code>monitor session 1 destination interface [nom et num\u00e9ro de port]</code></p> <p>\u00b0 Pour v\u00e9rifier si la fonctionnalit\u00e9 s'est bien appliqu\u00e9e :</p> <p><code>show monitor session 1</code></p>","text":""},{"location":"VPN/","title":"12/ VPN","text":"<p>En informatique, un r\u00e9seau priv\u00e9 virtuel ou r\u00e9seau virtuel priv\u00e9, plus commun\u00e9ment abr\u00e9g\u00e9 en VPN, est un syst\u00e8me permettant de cr\u00e9er un lien direct entre des ordinateurs distants, qui isole leurs \u00e9changes du reste du trafic se d\u00e9roulant sur des r\u00e9seaux de t\u00e9l\u00e9communication publics. </p>"},{"location":"VPN/#creations-des-routes","title":"Cr\u00e9ations des routes","text":""},{"location":"VPN/#routeur-1-et-2","title":"Routeur 1 et 2","text":"<p>Redirection \u00e0 faire :<code>ip nat inside source static udp 172.28.3.2 1194 interface GigabitEthernet0/0 1194</code> (\u00e0 faire sur les deux routeurs)</p>"},{"location":"VPN/#installation-du-vpn-sur-stormshield","title":"Installation du VPN sur Stormshield","text":""},{"location":"VPN/#regles-de-filtrage","title":"R\u00e8gles de filtrage","text":""},{"location":"VPN/#configuration-annuaire","title":"Configuration annuaire","text":""},{"location":"VPN/#configuration-vpn","title":"Configuration VPN","text":""},{"location":"VPN/#configuration-portail-captif","title":"Configuration portail captif","text":"<p>Adresse IP \u00e0 taper sur URL :<code>https://221.87.136.2:9443(addresse IP/FQDN)</code></p>"},{"location":"WIFI/","title":"12/ WIFI","text":"<p>Pour la mise en place de la borne Wi-Fi : Nous avions d\u00e9cid\u00e9s de configurer 2 SSID, le but de cela est de diff\u00e9rencier les utilisateurs de deux r\u00e9seaux.  1 SSID appel\u00e9 \"LAN-Chateauroux\" pour les personnes ne voulant aucun acc\u00e8s ethernet juste un lien avec le reste du r\u00e9seau et pour finir \"USER-Chateauroux\" qui permet aux personnes faisant partis du VLAN USERS un acc\u00e8s internet et \u00e0 l'ensemble du r\u00e9seau.</p>"},{"location":"WIFI/#configuration-du-switchcore","title":"Configuration du switchcore","text":""},{"location":"WIFI/#configuration-borne-wi-fi","title":"Configuration borne Wi-Fi","text":""},{"location":"WIFI/#configuration-borne-wi-fi_1","title":"Configuration borne Wi-Fi","text":""},{"location":"ad/","title":"5/ Contr\u00f4leur de domaine","text":""},{"location":"ad/#installation-de-lactive-directory","title":"Installation de l'Active Directory ? <p>Tout d'abord nous utiliserons un logiciel qui est dedi\u00e9 pour le cloud computing :</p> <p></p>","text":""},{"location":"ad/#quest-ce-que-nutanix","title":"Qu'est ce que Nutanix ? <p>Nutanix est une entreprise sp\u00e9cialis\u00e9e dans les solutions de gestion de l'infrastructure informatique et du cloud. Elle propose une plateforme hyperconverg\u00e9e qui combine stockage, calcul, virtualisation et gestion des ressources au sein d'un seul et m\u00eame syst\u00e8me. Cette approche simplifie la gestion des centres de donn\u00e9es, permettant aux entreprises de d\u00e9ployer et de g\u00e9rer leurs applications de mani\u00e8re plus efficace.</p> <p>La plateforme Nutanix est con\u00e7ue pour rendre l'infrastructure informatique plus flexible, \u00e9volutive et r\u00e9siliente. Elle permet aux entreprises de r\u00e9duire les co\u00fbts et la complexit\u00e9 associ\u00e9s \u00e0 la gestion de leur infrastructure, tout en offrant des performances accrues pour leurs applications.</p> <p>En r\u00e9sum\u00e9, Nutanix propose une solution hyperconverg\u00e9e qui transforme la gestion de l'infrastructure informatique en simplifiant les op\u00e9rations et en am\u00e9liorant la flexibilit\u00e9 et la performance des applications.</p>","text":""},{"location":"ad/#quelle-configuration","title":"Qu'elle configuration ? <p>Pour la configuration de notre VM (Virtual Machine) Nutanix, on a tout d'abord rejoins le menu Nutanix, puis par la suite entrer les param\u00e8tres suivants :</p> <p>Configuration</p> <p></p> <p>Resources</p> <p></p> <p>Management</p> <p></p>","text":""},{"location":"ad/#installation-de-lactive-directory_1","title":"Installation de l'Active Directory <p>Pour installer l'Active Directory nous sommes pass\u00e9s par l'ISO Windows Server 2022, une fois l'installation faite (la m\u00eame installation qu'un ordinateur lambda)</p> <p>Avant le param\u00e8trage et l'installation des r\u00f4les souhaitaient on va configurer une adresse IP statique \u00e0 notre serveur :</p> <p></p> <p>Une fois l'adresse IP attribu\u00e9e nous irons sur cette fen\u00eatre :</p> <p></p> <p></p>","text":""},{"location":"ad/#active-directory-domain-services","title":"Active Directory Domain Services  <p>A la place du mylab.local entrer votre nom de domaine que vous voulez</p> <p></p> <p>Ensuite next jusqu'\u00e0 Additional Options :</p> <p>Et dans cette section entrez-y votre nom de domaine (dans l'exemple MYLAB) Le notre se transformera par la suite par local.chateauroux.sportludique.fr</p> <p></p>","text":""},{"location":"ad/#dhcp","title":"DHCP <p>Pour la configuration DHCP :</p> <p>Tout d'abord, il a fallu r\u00e9fl\u00e9chir aux \u00e9tendues qu'on voulait attribu\u00e9 pour les VLANS, dans notre cas nous avons choisis le VLAN 215 qui est attribu\u00e9 \u00e0 tous les postes clients de notre r\u00e9seau qu'on a d\u00e9cid\u00e9 d'appeler \"VLAN215_USERS\"</p> <p>Pour se faire on ira dans la section DHCP puis nous arriverons sur cette fen\u00eatre, il suffira de faire dans notre cas (IPV4) faire un clic droit sur notre section donc IPV4, puis nouvelle \u00e9tendue :</p>","text":""},{"location":"ad/#configuration-de-letendue-dhcp","title":"Configuration de l'\u00e9tendue (DHCP)  <p>On proc\u00e8dera alors \u00e0 la configuration des options DHCP :</p> <p>Dans la passerelle on y configurera la passerelle choisie et qui a \u00e9tait configur\u00e9e en amont dans notre Switch : 172.28.5.254 pour la passerelle du r\u00e9seau USERS</p> <p></p> <p>Normalement automatiquement votre nom de domaine sera inscrit automatiquement :</p> <p></p> <p>Pour finir un dossier se cr\u00e9era dans la section IPV4 au nom de votre \u00e9tendue ce qui correspondra \u00e0 votre \u00e9tendue :</p> <p></p> <p>A la fin de votre configuration DHCP dans la cat\u00e9gorie Serveur Local vous devriez avoir ceci :</p> <p></p> <p>Le DHCP ne fera pas son \"job\" \u00e9tant donn\u00e9 qu'il n'est pas dans le m\u00eame r\u00e9seau que les clients c'est pour cela qu'il faudra activ\u00e9 le relais DHCP pour permettre au DHCP de faire son travail tout en \u00e9tant pas dans le r\u00e9seau</p> <p></p>","text":""},{"location":"apache/","title":"10/ DMZ Priv\u00e9","text":""},{"location":"apache/#serveur-http-sous-debian-12","title":"Serveur HTTP sous Debian 12","text":""},{"location":"apache/#installation-de-apache2","title":"Installation de Apache2","text":"<p><code>sudo apt update</code> : Mettre \u00e0 jour les biblioth\u00e8ques</p> <p><code>sudo apt install apache2</code> : Installation du service Apache</p> <p><code>sudo systemctl status apache2</code> : V\u00e9rification du service Apache</p>"},{"location":"apache/#installation-de-php","title":"Installation de PHP","text":"<p><code>sudo apt install php libapache2-mod-php php-mysql</code> : Installation de PHP pour Wordpress</p> <p><code>php -v</code> : V\u00e9rification</p>"},{"location":"apache/#vm-mariadb","title":"VM MariaDB","text":""},{"location":"apache/#installation-de-mariadb-et-creation-dune-db-wordpress","title":"Installation de MariaDB et Cr\u00e9ation d'une DB Wordpress","text":"<p><code>sudo apt update</code></p> <p><code>sudo apt install mariadb-server</code> : Installation du service</p> <p><code>sudo mysql_secure_installation</code> : Execution du script de s\u00e9curit\u00e9</p>"},{"location":"apache/#creation-dun-utilisateur-mariadb","title":"Cr\u00e9ation d'un utilisateur MariaDB","text":"<p><code>sudo mariadb</code> : Entrer dans MariaDB</p> <p><code>GRANT ALL ON *.* TO 'wordpress_user'@'%' IDENTIFIED BY 'Passw0rd123456!' WITH GRANT OPTION;</code> : Cr\u00e9ation de l'utilisateur</p> <p><code>FLUSH PRIVILEGES;</code></p> <p><code>exit</code></p>"},{"location":"apache/#creation-dune-base-de-donnees","title":"Cr\u00e9ation d'une base de donn\u00e9es","text":"<p><code>sudo mysql</code> : Entrer dans MariaDB</p> <p><code>CREATE DATABASE wordpress_db;</code> : Cr\u00e9ation de la base de donn\u00e9es</p> <p><code>GRANT ALL ON wordpress_db.* TO 'wordpress_user'@'%' IDENTIFIED BY 'Passw0rd123456!';</code> : Attribuer les droits \u00e0 un utilisateur</p> <p><code>FLUSH PRIVILEGES;</code> : Appliquer les privil\u00e8ges</p>"},{"location":"apache/#installation-de-wordpress","title":"Installation de Wordpress","text":"<p><code>sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/wordpress.conf</code> : Copier le fichier par d\u00e9faut de la conf afin de la modifier</p> <p><code>sudo nano /etc/apache2/sites-available/wordpress.conf</code> : Modification du fichier conf</p> <p><code>ServerName blog.chateauroux.sportludique.fr</code></p> <p><code>DocumentRoot /var/www/wordpress</code></p> <p><code>sudo a2ensite wordpress.conf</code> : Rendre actif le site</p> <p><code>wget -O /tmp/wordpress.tar.gz https://wordpress.org/latest.tar.gz</code> : T\u00e9l\u00e9charger Wordpress</p> <p><code>sudo tar -xzvf /tmp/wordpress.tar.gz -C /var/www</code> : Etraire Wordpress</p> <p><code>sudo chown -R www-data.www-data /var/www/wordpress</code> : Donner la propri\u00e9t\u00e9 au User Apache sur le r\u00e9pertoire</p> <p><code>sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf</code> : Pour changer la bind address</p>"},{"location":"cloud/","title":"12/ OwnCloud","text":"<p>Mise en place d'Owncloud, plusieurs probl\u00e8mes relev\u00e9s : Owncloud pas compatible avec PHP 8 et liaison LDAP. Accessible seulement pour les personnes pr\u00e9sente dans une Unit\u00e9 d'Organisation bien d\u00e9fini (Informatique)</p>"},{"location":"cloud/#presentation-des-utilisateurs-present-dans-luo-informatique","title":"Pr\u00e9sentation des utilisateurs pr\u00e9sent dans l'UO Informatique  <p>Les utilisateurs doivent avant tout d\u00e9verouillez leur compte et en changeant le mot de passe de ce dernier pour que Owncloud le d\u00e9couvre comme compte actif</p>","text":""},{"location":"cloud/#installation-des-pre-requis-pour-owncloud","title":"Installation des pr\u00e9-requis pour OwnCloud <p><code>sudo apt install apt-transport-https lsb-release ca-certificates wget</code></p> <p><code>sudo apt install apache2 mariadb-server</code></p> <p><code>sudo wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg</code> &lt;- Pour PHP 7.4</p> <p><code>sudo apt install php7.4-{xml,intl,common,json,curl,mbstring,mysql,gd,imagick,zip,opcache} libapache2-mod-php7.4</code></p> <p><code>sudo mysql_secure_installation</code></p> <p><code>sudo mysql -u root -p</code></p> <pre><code>Cr\u00e9ation de la base de donn\u00e9es :\n</code></pre> <p><code>CREATE DATABASE owncloud;</code> <code>CREATE USER 'ownclouduser'@'localhost' IDENTIFIED BY 'your_password';</code> <code>GRANT ALL ON owncloud.* TO 'ownclouduser'@'localhost';</code> <code>FLUSH PRIVILEGES;</code> <code>EXIT;</code></p> <p><code>wget https://download.owncloud.com/server/stable/owncloud-latest.tar.bz2</code> &lt;- OwnCloud</p> <p><code>sudo chown -R www-data:www-data /var/www/html/owncloud</code> &lt;- Les permissions</p> <p><code>sudo nano /etc/apache2/sites-available/owncloud.conf</code> &lt;- Conf Owncloud</p> <p><code>Alias /owncloud \"/var/www/html/owncloud/\"</code></p> <p><code>&lt;Directory /var/www/html/owncloud/&gt;</code> <code>Options +FollowSymlinks</code> <code>AllowOverride All</code></p> <p><code>&lt;IfModule mod_dav.c&gt;</code> <code>Dav off</code> <code>&lt;/IfModule&gt;</code></p> <p><code>SetEnv HOME /var/www/html/owncloud</code> <code>SetEnv HTTP_HOME /var/www/html/owncloud</code> <code>&lt;/Directory&gt;</code></p> <p><code>sudo a2ensite owncloud</code> &lt;- Activation du site Owncloud   <code>sudo a2enmod rewrite headers env dir mime</code> <code>sudo systemctl restart apache2</code></p> <p>Plus qu'\u00e0 configurer sur l'interface web</p>","text":""},{"location":"cloud/#configuration-interface-web-owncloud","title":"Configuration interface web Owncloud","text":""},{"location":"cloud/#resolution-dns-prive-et-public","title":"R\u00e9solution DNS Priv\u00e9 et Public","text":""},{"location":"cloud/#reverse-proxy-nginx","title":"Reverse Proxy NGINX","text":""},{"location":"cloud/#regle-nat-du-serveur","title":"R\u00e8gle NAT du serveur","text":""},{"location":"conf/","title":"9/ Les Confs des diff\u00e9rents \u00e9quipements","text":""},{"location":"conf/#interfaces-ips-du-switch-core","title":"Interfaces / IP's du Switch Core <pre><code>interface FastEthernet1/0/1\n switchport access vlan 211\n switchport mode access\n!\ninterface FastEthernet1/0/2\n switchport access vlan 211\n switchport mode access\n!\ninterface FastEthernet1/0/3\n switchport access vlan 211\n switchport mode access\n!\ninterface FastEthernet1/0/4\n switchport access vlan 211\n switchport mode access\n!\ninterface FastEthernet1/0/5\n switchport access vlan 216\n switchport mode access\n!\ninterface FastEthernet1/0/6\n switchport access vlan 216\n switchport mode access\n!\ninterface FastEthernet1/0/7\n switchport access vlan 216\n switchport mode access\n!\ninterface FastEthernet1/0/8\n switchport access vlan 216\n switchport mode access\n!\ninterface FastEthernet1/0/9\n switchport access vlan 217\n switchport mode access\n!\ninterface FastEthernet1/0/10\n switchport access vlan 217\n switchport mode access\n!\ninterface FastEthernet1/0/11\n switchport access vlan 217\n switchport mode access\n!\ninterface FastEthernet1/0/12\n switchport access vlan 217\n switchport mode access\n!\ninterface FastEthernet1/0/13\n switchport access vlan 215\n switchport mode access\n!\ninterface FastEthernet1/0/14\n switchport access vlan 215\n switchport mode access\n!\ninterface FastEthernet1/0/15\n switchport access vlan 215\n switchport mode access\n!\ninterface FastEthernet1/0/16\n switchport access vlan 215\n switchport mode access\n!\ninterface FastEthernet1/0/17\n switchport access vlan 214\n switchport mode access\n!\ninterface FastEthernet1/0/18\n switchport access vlan 214\n switchport mode access\n!\ninterface FastEthernet1/0/19\n switchport trunk encapsulation dot1q\n switchport trunk allowed vlan 217\n switchport mode trunk\n!\ninterface FastEthernet1/0/20\n switchport trunk encapsulation dot1q\n switchport mode trunk\n!\ninterface FastEthernet1/0/21\n switchport access vlan 210\n switchport mode access\n!\ninterface FastEthernet1/0/22\n switchport access vlan 210\n switchport mode access\n!\ninterface FastEthernet1/0/23\n switchport access vlan 210\n switchport mode access\n!\ninterface FastEthernet1/0/24\n switchport access vlan 210\n switchport mode access\n!\ninterface GigabitEthernet1/0/1\n!\ninterface GigabitEthernet1/0/2\n!\ninterface Vlan1\n no ip address\n!\ninterface Vlan210\n ip address 172.28.0.254 255.255.255.0\n!\ninterface Vlan211\n ip address 172.28.1.254 255.255.255.0\n!\ninterface Vlan212\n no ip address\n!\ninterface Vlan213\n no ip address\n!\ninterface Vlan215\n ip address 172.28.5.254 255.255.255.0\n ip helper-address 172.28.1.2\n!\ninterface Vlan216\n ip address 172.28.2.1 255.255.255.0\n!\ninterface Vlan217\n ip address 172.28.3.2 255.255.255.0\n!\nip default-gateway 172.28.3.254\nip classless\nip route 0.0.0.0 0.0.0.0 172.28.2.254\nip http server\nip http secure-server\n!\n</code></pre>","text":""},{"location":"conf/#interfaces-ips-routes-des-routeurs","title":"Interfaces / IP's / Routes des Routeurs <p>Routeur 1 :</p> <pre><code>interface Embedded-Service-Engine0/0\n no ip address\n shutdown\n!\ninterface GigabitEthernet0/0\n ip address 221.87.136.2 255.255.255.252\n ip nat outside\n no ip virtual-reassembly in\n duplex auto\n speed auto\n!\ninterface GigabitEthernet0/1\n ip address 172.28.3.253 255.255.255.0\n ip nat inside\n no ip virtual-reassembly in\n glbp 1 ip 172.28.3.254\n glbp 1 load-balancing host-dependent\n duplex auto\n speed auto\n no mop enabled\n!\ninterface Serial0/1/0\n no ip address\n shutdown\n clock rate 2000000\n!\nip default-gateway 221.87.136.1\nip forward-protocol nd\n!\nno ip http server\nno ip http secure-server\n!\nip nat inside source list 1 interface GigabitEthernet0/0 overload\nip nat inside source list 2 interface GigabitEthernet0/0 overload\nip route 0.0.0.0 0.0.0.0 221.87.136.1\nip route 172.28.2.0 255.255.255.0 172.28.3.2\nip route 172.28.3.0 255.255.255.0 183.44.36.1\n!\naccess-list 1 permit 192.168.36.0 0.0.0.255\naccess-list 2 permit 172.28.0.0 0.0.31.255\n!\n</code></pre> <p>Routeur 2 :</p> <pre><code>interface Embedded-Service-Engine0/0\n no ip address\n shutdown\n!\ninterface GigabitEthernet0/0\n ip address 183.44.36.1 255.255.255.252\n ip nat outside\n ip virtual-reassembly in\n duplex auto\n speed auto\n!\ninterface GigabitEthernet0/1\n ip address 172.28.3.252 255.255.255.0\n ip nat inside\n ip virtual-reassembly in\n glbp 1 ip 172.28.3.254\n glbp 1 load-balancing host-dependent\n duplex auto\n speed auto\n!\ninterface Serial0/0/0\n no ip address\n shutdown\n clock rate 2000000\n!\nip default-gateway 183.44.36.2\nip forward-protocol nd\n!\nno ip http server\nno ip http secure-server\n!\nip nat inside source list 1 interface GigabitEthernet0/0 overload\nip nat inside source list 2 interface GigabitEthernet0/0 overload\nip route 0.0.0.0 0.0.0.0 183.44.36.2\nip route 172.28.2.0 255.255.255.0 172.28.3.2\nip route 172.28.3.0 255.255.255.0 221.87.136.2\n!\naccess-list 1 permit 192.168.36.0 0.0.0.255\naccess-list 2 permit 172.28.0.0 0.0.31.255\n!\n</code></pre>","text":""},{"location":"docker/","title":"10/ Docker","text":""},{"location":"docker/#installation-de-docker","title":"Installation de Docker","text":""},{"location":"docker/#installation-du-service-docker","title":"Installation du service Docker","text":"<p><code>sudo apt install docker-ce</code> &lt;---- Installation du service</p> <p><code>sudo systemctl status docker</code> &lt;---- V\u00e9rification du service</p>"},{"location":"docker/#creation-des-differents-fichiers-pour-linstallation","title":"Cr\u00e9ation des diff\u00e9rents fichiers pour l'installation","text":"<p>Nous avons cr\u00e9er les fichiers suivants : <code>app.js</code> et <code>Dockerfile</code> au r\u00e9pertoire suivant : <code>/home/chx-docker/docker</code></p>"},{"location":"docker/#appjs","title":"app.js","text":"<p><code>// app.js</code></p> <p><code>const http = require('http');</code></p> <p><code>const server = http.createServer((req, res) =&gt; {</code></p> <p><code>res.statusCode = 200;</code></p> <p><code>res.setHeader('Content-Type', 'text/plain');</code></p> <p><code>res.end('Hello, Docker!\\n');</code></p> <p><code>});</code></p> <p><code>const port = process.env.PORT || 3000;</code></p> <p><code>server.listen(port, () =&gt; {</code></p> <p><code>console.log(``Server running on http://localhost:${port}``);</code></p> <p><code>});</code></p>"},{"location":"docker/#dockerfile","title":"Dockerfile","text":"<p><code># Use the official Node.js image</code></p> <p><code>FROM node:14</code></p> <p><code># Set the working directory</code></p> <p><code>WORKDIR /usr/src/app</code></p> <p><code># Copy package.json and package-lock.json</code></p> <p><code>COPY package*.json ./</code></p> <p><code># Install app dependencies</code></p> <p><code>RUN npm install</code></p> <p><code># Bundle app source</code></p> <p><code>COPY . .</code></p> <p><code># Expose the port</code></p> <p><code>EXPOSE 80</code></p> <p><code># Command to run the application</code></p> <p><code>CMD [\"node\", \"app.js\"]</code></p>"},{"location":"docker/#creer-limage-et-run-le-container","title":"Cr\u00e9er l'image et run le container","text":"<p><code>sudo docker build -t node:latest .</code></p> <p><code>docker run -it --name node -p 8080:80 node:latest</code></p>"},{"location":"documentation/","title":"2/ Composition du site de Ch\u00e2teauroux","text":"Nombre d'utilisateurs 81 Nombres de stations de travail 50 fixes 40 portables 10 Nombre de serveurs 3"},{"location":"documentation/#details-des-equipements-du-site","title":"D\u00e9tails des \u00e9quipements du site","text":"Nom Fonction OS CHX_DC_01 Contr\u00f4leur principal de domaine Windows server 2008 R2 Serveur Primaire DNS Domaine : chateauroux.local Serveur DHCP Serveur de fichiers CHX_DC_01 Contr\u00f4leur principal de domaine Windows server 2008 R2 Serveur Secondaire DNS Serveur de fichiers"},{"location":"documentation/#situation-et-repartition-geographique","title":"Situation et r\u00e9partition g\u00e9ographique","text":"<p>Situ\u00e9 id\u00e9alement au centre de la France, les stocks et la logistique sont la sp\u00e9cialit\u00e9 de ce site.</p>"},{"location":"msg/","title":"14/ Serveur de messagerie","text":"<p>Nous avons utilis\u00e9s HMailServer</p> <p></p> <p>Ajouter 2 comptes comme on peut le voir sur la capture d'\u00e9cran d'au-dessus</p> <p></p> <p>(\"Local host name\" est a configurer en amont sur le DNS) Local host name est a rentrer dans Settings --&gt; Protocols --&gt; SMTP</p> <p></p> <p>!!! NE PAS OUBLIER DE DESACTIVER L'AUTOBAN !!!</p> <p></p> <p>V\u00e9rifier si tout est op\u00e9rationnel</p> <p>Thunderbird</p> <p></p> <p>Puis connecter</p> <p></p>"},{"location":"parefeu/","title":"6/ Pare-Feu","text":""},{"location":"parefeu/#installation-du-pare-feu","title":"Installation du Pare-Feu  <p>Configuration du NAT :</p> <p></p> <p>Route par d\u00e9faut :</p> <p></p> <p>Capture des trames avant translation (m\u00eame r\u00e9seau que le firewall) :</p> <p></p> <p>C\u00f4t\u00e9 client :</p> <p></p> <p>On active le passall dans les r\u00e8gles de filtrage pour permettre \u00e0 toutes les entr\u00e9es d'acc\u00e8der au r\u00e9seau:</p> <p></p>","text":""},{"location":"routeur/","title":"7/ Routeur","text":""},{"location":"routeur/#installation-du-routeur","title":"Installation du Routeur <p>Pour commencer l'installation du routeur, on a besoin de reset sa configuration :</p> <p><code>confreg 0x2142</code></p> <p><code>reset</code></p> <p><code>confreg 0x2102</code></p> <p><code>reset</code></p> <p>Ensuite la configuration du port ou on connectera reseau local : </p> <p>Quand la question \"Quelle interface on souhaite choisir\", on y selectionne :</p> <p><code>GigabitEthernet 0/1</code> (pour notre cas)</p>","text":""},{"location":"routeur/#connexion-ssh","title":"Connexion SSH","text":""},{"location":"routeur/#nom-de-domaine","title":"Nom de domaine <p>On commence par configurer un nom de domaine au routeur :</p> <p><code>enable</code></p> <p><code>conf t</code></p> <p><code>hostname R1_CHX</code></p> <p><code>ip domain-name chateauroux.sportludique.fr</code></p>","text":""},{"location":"routeur/#configuration-routeur-pour-ssh","title":"Configuration routeur pour SSH <p><code>enable</code></p> <p><code>conf t</code></p> <p><code>crypto key generate rsa general-keys modulus 1024</code></p> <p><code>ip ssh version 2</code></p>","text":""},{"location":"routeur/#options-facultatif","title":"Options facultatif <p><code>ip ssh logging events</code> Pour enregistrer les \u00e9v\u00e8nements associ\u00e9s aux connexions ssh sont enregistr\u00e9s dans les logs</p> <p><code>ip ssh time-out 60</code> Un timeout de 60 secondes est ajout\u00e9 en cas d'inactivit\u00e9 durant l'authentification.</p> <p><code>ip ssh authentication-retries 3</code> Nous laissons trois essais pour la connexion au routeur. Suite \u00e0 ces essais, la connexion sera ferm\u00e9e.</p>","text":""},{"location":"routeur/#configuration-de-la-gateway-du-routeur","title":"Configuration de la gateway du routeur","text":""},{"location":"routeur/#r1","title":"R1 <p>Gateway : <code>172.28.3.253 /24</code></p>","text":""},{"location":"routeur/#r2","title":"R2 <p>Gateway : <code>172.28.3.252 /24</code></p>","text":""},{"location":"routeur/#configuration-du-protocole-glbp","title":"Configuration du protocole GLBP <p>GLBP, qui signifie \"Gateway Load Balancing Protocol\" (Protocole d'\u00e9quilibrage de charge de passerelle), est un protocole de routage de premier saut (First Hop Routing) d\u00e9velopp\u00e9 par Cisco Systems. Il est principalement utilis\u00e9 pour r\u00e9partir la charge du trafic entre plusieurs routeurs ou passerelles dans un r\u00e9seau local (LAN) afin d'am\u00e9liorer la disponibilit\u00e9 et la performance des passerelles par d\u00e9faut.</p> <p>Pour configurer le protocole, il faudra acc\u00e9der \u00e0 l'un des routeurs puis saissir cette commande :</p>","text":""},{"location":"routeur/#r1-et-r2","title":"** R1 et R2 ** <p><code>enable</code></p> <p><code>conf t</code></p> <p><code>interface g0/1</code></p> <p><code>glbp 1 ip 172.28.3.254</code></p> <p><code>glbp 1 load-balancing round-robin</code></p> <p>On peut ensuite verifier si la commande s'est bien appliqu\u00e9e en v\u00e9rifiant avec la commande:</p> <p><code>show run</code></p>","text":""},{"location":"shemareseau/","title":"3/ Sch\u00e9ma d\u00e9taill\u00e9 du r\u00e9seau global de Ch\u00e2teauroux","text":""},{"location":"ssh/","title":"4/ D\u00e9finition d'un nom de domaine et cr\u00e9ation d'un compte SSH sur SWITCH cisco","text":"<p>Connexion SSH</p>"},{"location":"ssh/#en-resume","title":"En r\u00e9sum\u00e9 :","text":""},{"location":"ssh/#voici-toutes-les-commandes-que-nous-avons-utilise-pour-configurer-une-connexion-ssh-a-notre-switch-cisco","title":"Voici toutes les commandes que nous avons utilis\u00e9 pour configurer une connexion SSH \u00e0 notre switch Cisco","text":"<p><code>&gt;en</code></p> <p><code>#show run</code></p> <p><code>#conf t</code></p>"},{"location":"ssh/#creation-des-noms-dhote-et-de-domaine-et-dun-mot-de-passe-pour-le-mode-privilegie","title":"Cr\u00e9ation des noms d'h\u00f4te et de domaine, et d'un mot de passe pour le mode privil\u00e9gi\u00e9","text":"<p>La cr\u00e9ation d\u2019un nom d\u2019h\u00f4te et d\u2019un nom de domaine est indispensable \u00e0 la configuration d\u2019une connexion SSH. Vous devez donc \u00eatre en mode configuration et r\u00e9aliser les commandes suivantes :</p> <p><code>hostname &lt;sw-Chateauroux&gt;</code></p> <p><code>ip domain-name &lt;chateauroux.sportludique.fr&gt;</code></p> <p>Ici, nous avons choisi de donner pour nom d\u2019h\u00f4te sw-Chateauroux et pour nom de domaine chateauroux.sportludique.fr.</p> <p>Pour cr\u00e9er un mot de passe pour le mode privil\u00e9gi\u00e9, il faut se placer dans le mode configuration et entrer la commande :</p> <p><code>#enable password &lt;P@ssw0rd123456!&gt;</code></p>"},{"location":"ssh/#generation-de-la-paire-de-cles-asymetriques-rsa","title":"G\u00e9n\u00e9ration de la paire de cl\u00e9s asym\u00e9triques RSA","text":"<p>RSA est une m\u00e9thode de chiffrement dite asym\u00e9trique. Elle est compos\u00e9e de deux cl\u00e9s, une priv\u00e9e et une publique, chiffr\u00e9es sur 768 bits minimum pour le SSH v2, et permet d\u2019assurer une s\u00e9curit\u00e9 optimale. Pour g\u00e9n\u00e9rer cette paire de cl\u00e9s, il suffit d\u2019entrer la commande :</p> <p><code>crypto key generate rsa</code></p> <p><code>exit</code></p> <p>Il est \u00e9galement demand\u00e9 d\u2019entrer la taille souhait\u00e9e de la cl\u00e9 en bits. Il est pr\u00e9f\u00e9rable de choisir une taille sup\u00e9rieure \u00e0 768 bits pour assurer une plus grande s\u00e9curit\u00e9. Nous avons ici choisi des cl\u00e9s de 1024 bits.</p> <p><code>How many bits in the modulus [512] : &lt;1024&gt;</code></p>"},{"location":"ssh/#activation-du-protocole-ssh-sur-le-switch-ou-routeur-cisco","title":"Activation du protocole SSH sur le switch ou routeur Cisco","text":"<p><code>(config)#ip ssh version 2</code></p> <p><code>(config)#line vty 0 4</code></p> <p><code>(config-line)#transport input ssh</code></p> <p><code>(config-line)#transport output ssh</code></p> <p><code>(config-line)#login local</code></p> <p><code>(config-line)#exit</code></p> <p><code>(config)#username &lt;admin&gt; password &lt;P@ssw0rd123456!&gt;</code></p> <p><code>(config)#exit</code></p> <p><code>#show run</code></p>"}]}